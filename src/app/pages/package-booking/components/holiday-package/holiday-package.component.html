<form [formGroup]="form" (ngSubmit)="onSubmit(form.value,form.valid)" novalidate>
  <div class="main-content">
    <div class="container-fluid">
      <div class="row">
        <div class="offset-xl-1 col-xl-10">
          <h3 class="card-title">Tour Package</h3>
          <div class="loader" *ngIf="isLoadingData">
            <svg class="circular" viewBox="25 25 50 50">
              <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
            </svg>
          </div>
          <div class="card" *ngIf="!isLoadingData">
            <div class="card-body">
              <div class="row">
                <div class="offset-xl-1 col-xl-10">
                  <div class="row">
                    <div class="col-sm-6">
                      <label class="col-form-label">
                        Package Name
                        <span class="text-danger">*</span>
                      </label>
                      <mat-form-field class="example-full-width">
                        <input matInput type="text" #title formControlName="title">
                      </mat-form-field>
                      <div [hidden]="form.get('title').valid || (form.get('title').pristine && !submitted)"
                        class="text-danger">
                        <small *ngIf="form.get('title').hasError('required')" class="error-label">
                          {{getLang('titleisrequired', 'Title is Required')}}
                        </small>
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <label class="col-form-label">
                        Package Type
                        <span class="text-danger">*</span>
                      </label>
                      <dynamic-autocomplete [formControlName]="pacakgetypes_fields.fieldname"
                        [setting]="pacakgetypes_fields" [dbvalue]="pacakgetypes_fields.dbvalue">
                      </dynamic-autocomplete>
                      <div [hidden]="form.get('packagetype').valid || (form.get('packagetype').pristine && !submitted)"
                        class="text-danger">
                        <small *ngIf="form.get('packagetype').hasError('required')" class="error-label">
                          {{getLang('packagetypeisrequired', 'Package Type is Required')}}
                        </small>
                      </div>
                    </div>




                    <div class="col-sm-6">
                      <label class="col-form-label">
                        Amount
                        <span class="text-danger">*</span>
                      </label>
                      <mat-form-field class="example-full-width">
                        <input matInput type="number" formControlName="cost">
                      </mat-form-field>
                      <div [hidden]="form.get('cost').valid || (form.get('cost').pristine && !submitted)"
                        class="text-danger">
                        <small *ngIf="form.get('cost').hasError('required')" class="error-label">
                          {{getLang('amountisrequired', 'Amount is Required')}}
                        </small>
                        <small *ngIf="form.get('cost').hasError('insertonlypositivenumber')" class="error-label">
                          {{getLang('amountisinvalid', 'Amount is invalid')}}
                        </small>
                      </div>
                    </div>

                    <div class="col-sm-6">
                      <label class="col-form-label">
                          {{getLang('tax(inclidesinprice)', 'TAX (Includes In Price)')}}
                      </label>
                      <mat-form-field>
                          <mat-select matNativeControl multiple formControlName="taxes">
                              <mat-option [value]="taxes._id" *ngFor="let taxes of taxesList">
                                  {{taxes?.taxname}}
                              </mat-option>
                          </mat-select>
                      </mat-form-field>
                    </div>

                  <div class="col-sm-4">
                    <label class="col-form-label">
                      Duration
                      <span class="text-danger">*</span>
                    </label>
                    <mat-form-field>
                      <mat-select formControlName="duration">
                        <mat-option [value]="duration.name" *ngFor="let duration of durationList">{{duration.name}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                    <div [hidden]="form.get('duration').valid || (form.get('duration').pristine && !submitted)"
                      class="text-danger">
                      <small *ngIf="form.get('duration').hasError('required')" class="error-label">
                        {{getLang('durationisrequired', 'Duration is Required')}}
                      </small>
                      <small *ngIf="form.get('duration').hasError('insertonlypositivenumber')" class="error-label">
                        {{getLang('durationisinvalid', 'Duration is invalid')}}
                      </small>
                    </div>
                  </div>

                  <div class="col-sm-4">
                    <label class="col-form-label">
                      No. of adults
                      <span class="text-danger">*</span>
                    </label>
                    <mat-form-field class="example-full-width">
                      <input matInput type="number" formControlName="totaladults">
                    </mat-form-field>
                    <div [hidden]="form.get('totaladults').valid || (form.get('totaladults').pristine && !submitted)"
                      class="text-danger">
                      <small *ngIf="form.get('totaladults').hasError('required')" class="error-label">
                        {{getLang('totaladultisrequired', 'Total Adults is Required')}}
                      </small>
                      <small *ngIf="form.get('totaladults').hasError('insertonlypositivenumber')" class="error-label">
                        {{getLang('totalchildrensisrequired', 'Total Adults is invalid')}}
                      </small>
                    </div>
                  </div>

                  <div class="col-sm-4">
                    <label class="col-form-label">
                      No. of kids
                    </label>
                    <mat-form-field class="example-full-width">
                      <input matInput type="number" formControlName="totalchildrens">
                    </mat-form-field>
                    <div [hidden]="form.get('totalchildrens').valid || (form.get('totalchildrens').pristine && !submitted)"
                      class="text-danger">
                      <small *ngIf="form.get('totalchildrens').hasError('required')" class="error-label">
                        {{getLang('totalchildrensisrequired', 'Total Children is Required')}}
                      </small>
                      <small *ngIf="form.get('totalchildrens').hasError('insertonlypositivenumber')" class="error-label">
                        {{getLang('totalchildrensisrequired', 'Total Children is invalid')}}
                      </small>
                    </div>
                  </div>


                  <div class="col-sm-6" *ngIf="form.get('traveldate').value">
                    <label class="col-form-label">
                      Travel Date
                    </label>
                    <mat-form-field class="example-full-width">
                      <input matInput formControlName="traveldate" [matDatepicker]="pickerdate">
                      <mat-datepicker-toggle matSuffix [for]="pickerdate"></mat-datepicker-toggle>
                      <mat-datepicker #pickerdate></mat-datepicker>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-6" *ngIf="form.get('capacity').value">
                    <label class="col-form-label">
                      Capacity
                    </label>
                    <mat-form-field class="example-full-width">
                      <input matInput type="number" formControlName="capacity">
                    </mat-form-field>
                  </div>

                  <div class="col-sm-12">
                    <label class="col-form-label">
                        {{getLang('packageimage', 'Package Image')}}
                    </label>
                    <div class="font-13"><span class="font-weight-bold">
                            {{getLang('tips', 'Tips')}}:</span>
                        {{getLang('pleaseuseimagewithratio', 'Please use images with a 4:2 ratio
                        (minimum of 1200px width)')}} .</div>
                    <div class="mt-2">
                        <div class="row membroz-row">
                            <ng-container *ngIf="formImageObj && formImageObj.attachment">
                            <div class="membroz-col mb-3">
                                <div class="position-relative d-flex">
                                    <a id="singleimage" data-fancybox="gallery"
                                        [href]="formImageObj.attachment">
                                        <img [src]="formImageObj.attachment" alt="" class="img-fluid img-add-product">
                                    </a>
                                    <span class="img-add-product-delete">
                                        <button mat-raised-button type="button"
                                            class="btn btn-just-icon btn-link"
                                            (click)="showSwal(formImageObj.attachment)">
                                            <i class="material-icons">cancel</i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                          </ng-container>

                            <img class="loadings" src="assets/img/image-loader.GIF"
                                style="height: 100px; width: 100px; display: none">

                            <div
                                class="membroz-col mb-3">
                                <span class="btn-file text-center add-upload-inner-vcenter">
                                    <label class="upload_button mb-0 add-upload-main"
                                        for="fileupload">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18.77"
                                            height="18.77" viewBox="0 0 18.77 18.77">
                                            <g transform="translate(-807.636 -666.636)">
                                                <line x2="11.858" y2="11.858"
                                                    transform="translate(817.021 667.636) rotate(45)"
                                                    fill="none" stroke="#949494"
                                                    stroke-linecap="round" stroke-width="1" />
                                                <line x1="11.858" y2="11.858"
                                                    transform="translate(817.021 667.636) rotate(45)"
                                                    fill="none" stroke="#949494"
                                                    stroke-linecap="round" stroke-width="1" />
                                            </g>
                                        </svg>
                                        <div class="mt-2 add-img-text">
                                            {{getLang('addimage', 'Add Image')}}
                                        </div>
                                    </label>
                                    <input type="file" id="fileupload" #fileInput ng2FileSelect
                                        [style.display]="'none'" [uploader]="customeUploader2"
                                        (change)="fileInput.value=''" multiple />
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                  </div>

                  <div class="col-sm-12 text-right">
                    <button class="btn btn-primary btn-file dropdown-toggle" type="button" data-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false">
                      <i class="material-icons">add</i> Add
                    </button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" (click)="addNewdestination()">
                        Add Destination
                      </a>
                      <a class="dropdown-item" (click)="addNewtransfer()">
                        Add Transfer
                      </a>
                      <a class="dropdown-item" (click)="addNewflight()">
                        Add Flight
                      </a>
                      <a class="dropdown-item" (click)="addNewactivity()">
                        Add Activity
                      </a>
                    </div>
                  </div>

                  <mat-tab-group [(selectedIndex)]="ind" (selectedTabChange)="onTabChanged($event);" >
                    <mat-tab [label]="'Destination ('+form.controls.destinations.controls.length+')'" >
                      <ng-template matTabContent>
                        <ng-template [ngTemplateOutlet]="loadingTmpl" *ngIf="isLoadingtab"></ng-template>
                      <ng-container *ngFor="let destinationGrp of form.controls.destinations.controls ; let di = index;" formArrayName="destinations" >
                        <ng-container [formGroupName]="di">
                          <div class="d-flex align-items-center mt-5">
                            <h4 class="card-title flex-grow-1">Destination </h4>
                             <button mat-raised-button type="button" matTooltip="Delete" [matTooltipPosition]="'above'"
                              class="btn btn-link btn-primary btn-just-icon edit" (click)="removeDestination(di)">
                              <i class="material-icons">delete</i>
                            </button>
                          </div>

                          <div class="row">
                            <div class="col-sm-6">
                              <label class="col-form-label">
                                Day
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field>
                                <mat-select formControlName="day" #destinationDayRef (selectionChange)="dayChanges($event.value,di , 'destination')" >
                                  <mat-option [value]="duration.day" *ngFor="let duration of subdurationArrayList[di]">{{duration.day}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <div [hidden]="destinationGrp.get('day').valid || (destinationGrp.get('day').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="destinationGrp.get('day').hasError('required')" class="error-label">
                                  {{getLang('durationisrequired', 'Day is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-6">
                              <label class="col-form-label">
                                Destination
                                <span class="text-danger">*</span>
                              </label>
                              <dynamic-autocomplete [formControlName]="'destination'" [setting]="resortlocation_fieldsArray[di]"
                                [dbvalue]="resortlocation_fieldsArray[di].dbvalue" (inputModelChange)="onItemAdded($event, di , 'destination')" >
                              </dynamic-autocomplete>
                              <div
                                [hidden]="destinationGrp.get('destination').valid || (destinationGrp.get('destination').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="destinationGrp.get('destination').hasError('required')" class="error-label">
                                  {{getLang('destinationisrequired', 'Destination is Required')}}
                                </small>
                              </div>
                            </div>

                            <!-- will add later  END-->
                            <div class="col-sm-12">
                              <label class="col-form-label">
                                Description
                              </label>
                                <angular-editor formControlName="description" [placeholder]="'Enter here...'"></angular-editor>
                            </div>

                            <div class="col-sm-12">
                              <label class="col-form-label">
                                {{getLang('destinationimage', 'Destination Images')}}
                              </label>
                              <div class="font-13"><span class="font-weight-bold">
                                  {{getLang('tips', 'Tips')}}:</span>
                                {{getLang('pleaseuseimagewithratio', 'Please use images with a 4:2 ratio
                                (minimum of 1200px width)')}} .
                              </div>
                              <div class="mt-2">
                                <div class="row membroz-row">
                                  <ng-container
                                    *ngIf="formImageArray['destination'] && formImageArray['destination'][di] && formImageArray['destination'][di].length > 0">
                                    <div class="membroz-col mb-3"
                                      *ngFor="let item of formImageArray['destination'][di];let i = index">
                                      <div class="position-relative d-flex">
                                        <a id="singledata_{{i}}" data-fancybox="gallery" [href]="item.attachment">
                                          <img [src]="item.attachment" alt="" class="img-fluid img-add-product">
                                        </a>
                                        <span class="img-add-product-delete">
                                          <button mat-raised-button type="button" class="btn btn-just-icon btn-link"
                                            (click)="removeImg('destination',di,i)">
                                            <i class="material-icons">cancel</i>
                                          </button>
                                        </span>
                                      </div>
                                    </div>
                                  </ng-container>
                                  <img class="loading_destination_{{di}}" src="assets/img/image-loader.GIF"
                                    style="height: 100px; width: 100px; display: none">
                                  <div class="membroz-col mb-3">
                                    <span class="btn-file text-center add-upload-inner-vcenter">
                                      <label class="upload_button mb-0 add-upload-main" for="fileupload_destination_{{di}}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18.77" height="18.77" viewBox="0 0 18.77 18.77">
                                          <g transform="translate(-807.636 -666.636)">
                                            <line x2="11.858" y2="11.858" transform="translate(817.021 667.636) rotate(45)" fill="none"
                                              stroke="#949494" stroke-linecap="round" stroke-width="1" />
                                            <line x1="11.858" y2="11.858" transform="translate(817.021 667.636) rotate(45)" fill="none"
                                              stroke="#949494" stroke-linecap="round" stroke-width="1" />
                                          </g>
                                        </svg>
                                        <div class="mt-2 add-img-text">
                                          {{getLang('addimage', 'Add image')}}
                                        </div>
                                      </label>
                                      <input
                                        *ngIf="customeUploader && customeUploader['destination']&& customeUploader['destination'][di]"
                                        type="file" id="fileupload_destination_{{di}}" #fileInput ng2FileSelect [style.display]="'none'"
                                        [uploader]="customeUploader['destination'][di]" (change)="fileInput.value=''" multiple />

                                      <input type="hidden" id="fileupload_destination_{{di}}" formControlName="attachment">
                                    </span>
                                  </div>
                                </div>
                              </div>
                            </div>

                          </div>

                        </ng-container>
                      </ng-container>
                    </ng-template>
                    </mat-tab>

                    <mat-tab [label]="'Transfer ('+form.controls.transfer.controls.length+')'">
                      <ng-template matTabContent >
                        <ng-template [ngTemplateOutlet]="loadingTmpl" *ngIf="isLoadingtab"></ng-template>
                      <ng-container *ngFor="let transferGrp of  form.controls.transfer.controls; let ti = index ;"
                        formArrayName="transfer">
                        <ng-container [formGroupName]="ti">

                          <div class="d-flex align-items-center mt-5">
                            <h4 class="card-title flex-grow-1">Transfer </h4>

                           <button mat-raised-button type="button" matTooltip="Delete" [matTooltipPosition]="'above'"
                              class="btn btn-link btn-primary btn-just-icon edit" (click)="removeTransfer(ti)">
                              <i class="material-icons">delete</i>
                            </button>
                          </div>

                          <div class="row">
                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Day
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field>
                                <mat-select formControlName="day" #transferDayRef (selectionChange)="dayChanges($event.value,ti , 'transfer')">
                                  <mat-option [value]="duration.day" *ngFor="let duration of subdurationTrnsArrayList[ti]">{{duration.day}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <div [hidden]="transferGrp.get('day').valid || (transferGrp.get('day').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="transferGrp.get('day').hasError('required')" class="error-label">
                                  {{getLang('dayisrequired', 'Day is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                From
                                <span class="text-danger">*</span>
                              </label>
                              <dynamic-autocomplete [formControlName]="'from'" [setting]="resortlocationTFrm_fieldsArray[ti]"
                                [dbvalue]="resortlocationTFrm_fieldsArray[ti].dbvalue" (inputModelChange)="onItemAdded($event, ti , 'transferfrom')"  >
                              </dynamic-autocomplete>
                              <div
                              [hidden]="transferGrp.get('from').valid || (transferGrp.get('from').pristine && !submitted)"
                              class="text-danger">
                              <small *ngIf="transferGrp.get('from').hasError('required')" class="error-label">
                                {{getLang('fromisrequired', 'From is Required')}}
                              </small>
                            </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                To
                                <span class="text-danger">*</span>
                              </label>
                              <dynamic-autocomplete [formControlName]="'to'" [setting]="resortlocationTTo_fieldsArray[ti]"
                                [dbvalue]="resortlocationTTo_fieldsArray[ti].dbvalue" (inputModelChange)="onItemAdded($event, ti , 'transferto')">
                              </dynamic-autocomplete>
                              <div
                                [hidden]="transferGrp.get('to').valid || (transferGrp.get('to').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="transferGrp.get('to').hasError('required')" class="error-label">
                                  {{getLang('toisrequired', 'To is Required')}}
                                </small>
                             </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Duration
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field class="example-full-width">
                                <input matInput mask="Hh:m0" placeholder="HH:MM" placeholder="HH:MM" formControlName="duration">
                              </mat-form-field>
                              <div
                                [hidden]="transferGrp.get('duration').valid || (transferGrp.get('duration').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="transferGrp.get('duration').hasError('required')" class="error-label">
                                  {{getLang('durationisrequired', 'Duration is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Facilities
                              </label>
                              <mat-form-field>
                                <mat-select [formControlName]="'facilities'" multiple>
                                  <mat-option value="AC">AC</mat-option>
                                  <mat-option value="First Aid">First Aid</mat-option>
                                  <mat-option value="Multiple Luggage Bags">Multiple Luggage Bags</mat-option>
                                  <mat-option value="Multiple Seater">Multiple Seater</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Transfer Type
                              </label>
                              <mat-form-field>
                                <mat-select matNativeControl formControlName="transfertype">
                                  <mat-option value="Private Transfer by Car">Private Transfer by Car</mat-option>
                                  <mat-option value="Intercity">Intercity</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label"></label>
                              <div class="mt-2">
                                <section class="example-section">
                                  <mat-checkbox class="example-margin" [formControlName]="'nightscover'" >Nights Cover</mat-checkbox>
                                </section>
                              </div>
                            </div>


                          </div>
                        </ng-container>
                      </ng-container>
                    </ng-template>
                    </mat-tab>

                    <mat-tab [label]="'Flight ('+form.controls.flight.controls.length+')'">
                      <ng-template matTabContent >
                        <ng-template [ngTemplateOutlet]="loadingTmpl" *ngIf="isLoadingtab"></ng-template>
                      <ng-container *ngFor="let flightGrp of  form.controls.flight.controls; let fi = index;"
                        formArrayName="flight">
                        <ng-container [formGroupName]="fi">

                          <div class="d-flex align-items-center mt-5">
                            <h4 class="card-title flex-grow-1">Flight </h4>

                            <button mat-raised-button type="button" matTooltip="Delete" [matTooltipPosition]="'above'"
                              class="btn btn-link btn-primary btn-just-icon edit" (click)="removeFlight(fi)">
                              <i class="material-icons">delete</i>
                            </button>
                          </div>

                          <div class="row">
                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Day
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field>
                                <mat-select formControlName="day" #flightDayRef (selectionChange)="dayChanges($event.value,fi , 'flight')">
                                  <mat-option [value]="duration.day" *ngFor="let duration of subdurationFltArrayList[fi]">{{duration.day}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <div [hidden]="flightGrp.get('day').valid || (flightGrp.get('day').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="flightGrp.get('day').hasError('required')" class="error-label">
                                  {{getLang('dayisrequired', 'Day is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                From
                                <span class="text-danger">*</span>
                              </label>
                              <dynamic-autocomplete [formControlName]="'from'" [setting]="resortlocationFFrm_fieldsArray[fi]"
                                [dbvalue]="resortlocationFFrm_fieldsArray[fi].dbvalue" (inputModelChange)="onItemAdded($event, fi , 'flightfrom')">
                              </dynamic-autocomplete>
                              <div
                              [hidden]="flightGrp.get('from').valid || (flightGrp.get('from').pristine && !submitted)"
                              class="text-danger">
                              <small *ngIf="flightGrp.get('from').hasError('required')" class="error-label">
                                {{getLang('fromisrequired', 'From is Required')}}
                              </small>
                            </div>
                            </div>
                            <div class="col-sm-4">
                              <label class="col-form-label">
                                To
                                <span class="text-danger">*</span>
                              </label>
                              <dynamic-autocomplete [formControlName]="'to'" [setting]="resortlocationFTo_fieldsArray[fi]"
                                [dbvalue]="resortlocationFTo_fieldsArray[fi].dbvalue" (inputModelChange)="onItemAdded($event, fi , 'flightto')">
                              </dynamic-autocomplete>
                              <div [hidden]="flightGrp.get('to').valid || (flightGrp.get('to').pristine && !submitted)" class="text-danger">
                                <small *ngIf="flightGrp.get('to').hasError('required')" class="error-label">
                                  {{getLang('toisrequired', 'To is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Duration
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field class="example-full-width">
                                <input matInput mask="Hh:m0" placeholder="HH:MM" formControlName="duration" >
                              </mat-form-field>
                              <div
                                [hidden]="flightGrp.get('duration').valid || (flightGrp.get('duration').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="flightGrp.get('duration').hasError('required')" class="error-label">
                                  {{getLang('durationisrequired', 'Duration is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label">
                                Ticket Type
                              </label>
                              <mat-form-field >
                                <mat-select [formControlName]="'tickettype'">
                                  <mat-option value="Economy Class">Economy Class</mat-option>
                                  <mat-option value="Premium Economy Class">Premium Economy Class</mat-option>
                                  <mat-option value="Business Class">Business Class</mat-option>
                                  <mat-option value="First Class">First Class</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>

                            <div class="col-sm-4">
                              <label class="col-form-label"></label>
                              <div class="mt-2">
                                <section class="example-section">
                                  <mat-checkbox class="example-margin" [formControlName]="'nightscover'" >Nights Cover</mat-checkbox>
                                </section>
                              </div>
                            </div>


                          </div>
                        </ng-container>
                      </ng-container>
                    </ng-template>
                    </mat-tab>

                    <mat-tab [label]="'Activity ('+form.controls.activity.controls.length+')'" >
                      <ng-template matTabContent >
                      <ng-template [ngTemplateOutlet]="loadingTmpl" *ngIf="isLoadingtab"></ng-template>
                      <ng-container *ngFor="let activityGrp of form.controls.activity.controls; let ai = index;"
                        formArrayName="activity">
                        <ng-container [formGroupName]="ai">

                          <div class="d-flex align-items-center mt-5">
                            <h4 class="card-title flex-grow-1">Activity </h4>
                             <button mat-raised-button type="button" matTooltip="Delete" [matTooltipPosition]="'above'"
                              class="btn btn-link btn-primary btn-just-icon edit" (click)="removeActivity(ai)">
                              <i class="material-icons">delete</i>
                            </button>
                          </div>

                          <div class="row">
                            <div class="col-sm-6">
                              <label class="col-form-label">
                                Day
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field>
                                <mat-select formControlName="day" #activityDayRef (selectionChange)="dayChanges($event.value,ai , 'activity')">
                                  <mat-option [value]="duration.day" *ngFor="let duration of subdurationActArrayList[ai]">{{duration.day}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <div
                                [hidden]="activityGrp.get('day').valid || (activityGrp.get('day').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="activityGrp.get('day').hasError('required')" class="error-label">
                                  {{getLang('dayisrequired', 'Day is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-6">
                              <label class="col-form-label">
                                Activity
                                <span class="text-danger">*</span>
                              </label>
                               <dynamic-autocomplete [formControlName]="'event'"
                                  [setting]="activity_fieldsArray[ai]" [dbvalue]="activity_fieldsArray[ai].dbvalue" (inputModelChange)="onItemAdded($event, ai , 'evnt')" >
                                </dynamic-autocomplete>
                              <div
                                [hidden]="activityGrp.get('event').valid || (activityGrp.get('event').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="activityGrp.get('event').hasError('required')" class="error-label">
                                  {{getLang('eventisrequired', 'Event is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-6">
                              <label class="col-form-label">
                                Location
                                <span class="text-danger">*</span>
                              </label>
                              <dynamic-autocomplete [formControlName]="'location'" [setting]="resortlocationE_fieldsArray[ai]"
                                [dbvalue]="resortlocationE_fieldsArray[ai].dbvalue" (inputModelChange)="onItemAdded($event, ai , 'evntlcn')">
                              </dynamic-autocomplete>
                              <div
                                [hidden]="activityGrp.get('location').valid || (activityGrp.get('location').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="activityGrp.get('location').hasError('required')" class="error-label">
                                  {{getLang('locationisrequired', 'Location is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-6">
                              <label class="col-form-label">
                                Duration
                                <span class="text-danger">*</span>
                              </label>
                              <mat-form-field class="example-full-width">
                                <input matInput mask="Hh:m0" placeholder="HH:MM" formControlName="duration">
                              </mat-form-field>
                              <div
                                [hidden]="activityGrp.get('duration').valid || (activityGrp.get('duration').pristine && !submitted)"
                                class="text-danger">
                                <small *ngIf="activityGrp.get('duration').hasError('required')" class="error-label">
                                  {{getLang('durationisrequired', 'Duration is Required')}}
                                </small>
                              </div>
                            </div>

                            <div class="col-sm-12">
                              <label class="col-form-label">
                                Description
                              </label>
                                <angular-editor formControlName="description" [placeholder]="'Enter here...'"></angular-editor>
                            </div>

                            <div class="col-sm-12">
                              <label class="col-form-label">
                                {{getLang('activityimage', 'Activity Images')}}
                              </label>
                              <div class="font-13"><span class="font-weight-bold">
                                  {{getLang('tips', 'Tips')}}:</span>
                                {{getLang('pleaseuseimagewithratio', 'Please use images with a 4:2 ratio
                                (minimum of 1200px width)')}} .</div>
                              <div class="mt-2">
                                <div class="row membroz-row">
                                  <ng-container
                                    *ngIf="formImageArray['activity'] && formImageArray['activity'][ai] && formImageArray['activity'][ai].length > 0">
                                    <div class="col-xl-2 col-lg-2 col-md-3 col-sm-4 col-6 membroz-col d-flex flex-grow-1 mb-3"
                                      *ngFor="let item of formImageArray['activity'][ai];let i = index">
                                      <div class="position-relative d-flex">
                                        <a id="singledata_{{i}}" data-fancybox="gallery" [href]="item.attachment">
                                          <img [src]="item.attachment" alt="" class="img-fluid img-add-product">
                                        </a>
                                        <span class="img-add-product-delete">
                                          <button mat-raised-button type="button" class="btn btn-just-icon btn-link"
                                            (click)="removeImg('activity',ai,i)">
                                            <i class="material-icons">cancel</i>
                                          </button>
                                        </span>
                                      </div>
                                    </div>
                                  </ng-container>

                                  <img class="loading_activity_{{ai}}" src="assets/img/image-loader.GIF"
                                    style="height: 100px; width: 100px; display: none">

                                  <div class="col-xl-2 col-lg-2 col-md-3 col-sm-4 col-6 membroz-col d-flex flex-grow-1 mb-3">
                                    <span class="btn-file text-center add-upload-inner-vcenter">
                                      <label class="upload_button mb-0 add-upload-main" for="fileupload_activity_{{ai}}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18.77" height="18.77" viewBox="0 0 18.77 18.77">
                                          <g transform="translate(-807.636 -666.636)">
                                            <line x2="11.858" y2="11.858" transform="translate(817.021 667.636) rotate(45)" fill="none"
                                              stroke="#949494" stroke-linecap="round" stroke-width="1" />
                                            <line x1="11.858" y2="11.858" transform="translate(817.021 667.636) rotate(45)" fill="none"
                                              stroke="#949494" stroke-linecap="round" stroke-width="1" />
                                          </g>
                                        </svg>
                                        <div class="mt-2">
                                          {{getLang('addimage', 'Add image')}}
                                        </div>
                                      </label>
                                      <input *ngIf="customeUploader &&  customeUploader['activity'] && customeUploader['activity'][ai]"
                                        type="file" id="fileupload_activity_{{ai}}" #fileInput ng2FileSelect [style.display]="'none'"
                                        [uploader]="customeUploader['activity'][ai]" (change)="fileInput.value=''" multiple />

                                      <input type="hidden" id="fileupload_activity_{{ai}}" formControlName="attachment">
                                    </span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </ng-container>
                    </ng-template>
                    </mat-tab>
                  </mat-tab-group>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer fixed-bottom bg-white shadow-top" *ngIf="!isLoadingData">
    <div class="container-fluid">
      <div class="row">
        <div class="offset-xl-1 col-xl-10">
          <div class="row">
            <div class="col-sm-6 text-left">
              <button *ngIf="bindId" class="btn btn-success" [disabled]="disableButton" type="button" [routerLink]="['/pages/package-booking/schedule-package/'+bindId]">
                <i class="material-icons">schedule</i> Schedule Tour
              </button>
            </div>
            <div class="col-sm-6 text-right">
              <button class="btn btn-default" [disabled]="disableButton" type="button" [routerLink]="['/pages/dynamic-list/list/tourpackage']">
                <i class="material-icons">close</i> Cancel
              </button>
              <button class="btn btn-primary ml-2" [disabled]="disableButton" type="submit">
                <i class="material-icons">save</i> Save
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
</form>


<ng-template #loadingTmpl>
  <div class="loader">
    <svg class="circular" viewBox="25 25 50 50">
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
    </svg>
  </div>
</ng-template>
